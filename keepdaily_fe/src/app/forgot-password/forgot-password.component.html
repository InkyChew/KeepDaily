<div class="forgot-password">
    <ng-container [ngSwitch]="lang">
        <ng-container *ngSwitchCase="'en-US'">
            <ng-container *ngTemplateOutlet="en"></ng-container>
        </ng-container>
        <ng-container *ngSwitchCase="'zh-TW'">
            <ng-container *ngTemplateOutlet="zh"></ng-container>
        </ng-container>
    </ng-container>
</div>

<!-- en -->
<ng-template #en>
    <ng-container *ngIf="status == 4; else init">
        <p>
            Please check your email to obtain the link for password reset.
            Click <button class="btn-link" (click)="send()">resend email</button> if not received or expired.
        </p>
    </ng-container>
    
    <ng-template #init>
        <ng-container *ngIf="status == 1 else invalid">
            <ng-container *ngTemplateOutlet="changepwd"></ng-container>
        </ng-container>
        
        <ng-template #invalid>
            <h2>ğŸ˜”Fail to change password.</h2>
            <ng-container *ngIf="status == 3 else register"><p>Please <button class="btn-link" (click)="send()">resend the email</button> and verify again.
                Due to following possible reasons:
                1. Only the latest confirmation letter is valid.
                2. The confirmation letter exceeded the period of one day.</p>
            </ng-container>
            <ng-template #register><p>Your account does not exist. Please <a routerLink="/register">register</a> a new one.</p></ng-template>
        </ng-template>
    </ng-template>
</ng-template>

<!-- zh -->
<ng-template #zh>
    <ng-container *ngIf="status == 4; else init">
        <p>
            è«‹å‰å¾€æ‚¨çš„ä¿¡ç®±ä»¥å–å¾—å¯†ç¢¼é‡è¨­é€£çµã€‚
            è‹¥æœªæ”¶åˆ°é©—è­‰ä¿¡ä»¶æˆ–é©—è­‰ä¿¡ä»¶å·²éæœŸã€‚è«‹<button class="btn-link" (click)="send()">é‡æ–°ç™¼é€é©—è­‰ä¿¡</button>ã€‚
        </p>
    </ng-container>
    
    <ng-template #init>
        <ng-container *ngIf="status == 1 else invalid">
            <ng-container *ngTemplateOutlet="changepwd"></ng-container>
        </ng-container>
        
        <ng-template #invalid>
            <h2>ğŸ˜”é‡è¨­å¯†ç¢¼å¤±æ•—</h2>
            <ng-container *ngIf="status == 3 else register"><p>è«‹<button class="btn-link" (click)="send()">é‡æ–°ç™¼é€é©—è­‰ä¿¡</button>å†é©—è­‰ä¸€æ¬¡ã€‚
                ç”±æ–¼ä»¥ä¸‹å¯èƒ½çš„åŸå› ï¼š
                1. åƒ…æœ€æ–°çš„é©—è­‰ä¿¡ä»¶æœ‰æ•ˆã€‚
                2. é©—è­‰ä¿¡ä»¶å·²è¶…éä¸€å¤©çš„æœŸé™ã€‚</p>
            </ng-container>
            <ng-template #register><p>æ‚¨çš„å¸³æˆ¶ä¸å­˜åœ¨ã€‚<a routerLink="/register">è¨»å†Š</a>æ–°å¸³æˆ¶ã€‚</p></ng-template>
        </ng-template>
    </ng-template>
</ng-template>

<!-- changepwd -->
<ng-template #changepwd>
    <h2 txs>Change password</h2>
    <form [formGroup]="changePwd" (ngSubmit)="submit()">

        <label class="field">
            <span class="field-title" txs>Password</span>
            <input type="password" required formControlName="password" maxlength="50">
            <small class="field-msg">{{ formService.getErrorMsg('password') | txs | async }}</small>
        </label>
    
        <label class="field">
            <span class="field-title" txs>Confirm Password</span>
            <input type="password" required formControlName="confirmpassword" maxlength="50">
            <small class="field-msg">{{ formService.getErrorMsg('confirmpassword')  | txs | async }}</small>
        </label>
    
        <button class="btn btn-primary" txs>Submit</button>
    </form> 
</ng-template>