<div class="plans">
    <button (click)="add()">‚ûï</button>

    <ul *ngFor="let plan of planList; index as i" class="plans">
        <li class="plan">
            <ng-container *ngIf="edit==i else readonly">
                <label class="field required">
                    <input type="text" [(ngModel)]="plan.title" maxlength="20">
                </label>
    
                <label class="field required">
                    <input type="text" [(ngModel)]="plan.description" maxlength="50">
                </label>

                <label class="field">
                    <span class="field-title required">Start From</span>
                    <input type="date" [(ngModel)]="plan.startFrom" [min]="today">
                </label>
                
                <label class="field">
                    <span class="field-title">Category</span>
                    <select [(ngModel)]="plan.categoryId">
                        <option value="null">- Select a category -</option>
                        <option *ngFor="let ctg of ctgList" [ngValue]="ctg.id">{{ ctg.name }}</option>
                    </select>   
                </label>

                <div class="btns">
                    <button (click)="save(plan)">üíæ</button>
                    <button (click)="closeEditor(plan)">‚ùå</button>
                </div>
            </ng-container>
            <ng-template #readonly>
                <div class="plan-header">
                    <a [routerLink]="['/plan', plan.id]">{{ plan.title }}</a>
                    <span class="ctg">{{ plan.category?.name }}</span>
                </div>

                <p>{{ plan.description }}</p>

                <span>{{ plan.startFrom }}</span>

                <div class="plan-footer">
                    <button (click)="edit = i">‚úèÔ∏è</button>
                    <button (click)="delete(plan.id, i)">üóëÔ∏è</button>
                </div>
            </ng-template>
        </li>
    </ul>
</div>